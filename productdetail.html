<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
    <link rel="stylesheet" href="css.css">
    <link rel="stylesheet" href="my.css">
    <link rel="stylesheet" href="style.css">
    <style>
       .product-image{
        width:50vw;
        height:40vw;
        background-position: center;
       }
        .product-page {
            font-family: Arial, sans-serif;
            color: #333;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .product-header h1 {
            font-size: 24px;
            font-weight: bold;
            color: #007BFF;
        }

        .product-main {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .product-image-section {
            flex: 2;
        }

        .product-image {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .product-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .product-thumbnails img {
            width: 60px;
            height: 60px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }

        .product-thumbnails img:hover {
            border-color: #007BFF;
        }

        .product-details {
            flex: 3;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .product-price {
            font-size: 28px;
            font-weight: bold;
            color: #E74C3C;
            margin: 10px 0;
        }

        .btn-buy {
            padding: 12px 20px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }

        .btn-buy:hover {
            background-color: #45a049;
        }

        .product-description {
            margin-top: 20px;
            border-top: 1px solid #f0f0f0;
            padding-top: 10px;
        }

        .product-reviews {
            margin-top: 40px;
        }

        .review-item {
            border-bottom: 1px solid #f0f0f0;
            padding: 10px 0;
        }

        .comment-box {
            margin-top: 20px;
        }

        .comment-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .btn-publish {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-publish:hover {
            background-color: #0056b3;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background-color: #f9f9f9;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <header>
        <div class="head">
            <a href="http://127.0.0.1:5500/index2.html"><img class="logo" src="Selling_transparent-.png" alt="Find Sell"></a>
            <input type="text" class="search" style="width:35vw">
            <button class="bt">Search</button>
         
            <section class="dropd" style="width:20vw">Welcome! <span id="usrem"></span>
                <section class="dropdown" style="margin-top:2vw" >
                    <a href='http://127.0.0.1:5500/myaccount.html'>My Account <div class="tag"></div></a>
                    <div class="tag"><a href='http://127.0.0.1:5500/myproduct.html'>My Products</a></div>
                    <div class="tag"><a href='http://127.0.0.1:5500/myfriend.html'>My Friends</a></div>
                    <div class="tag"><a href='http://127.0.0.1:5500/myaward.html'>Awards</a></div>
                </section>
            </section>
            
            <a href='http://127.0.0.1:5500/product.html'><div class="set" style="width:7vw; margin-left:3vw;"><button class="inbt">Sell</button></div></a>
        </div>
    </header>
    <script>
        let usrmail = localStorage.getItem("usremail")
        let passwd = localStorage.getItem("usrpasswd")
        let idnum = localStorage.getItem("usrid")
        document.getElementById("usrem").innerHTML= usrmail
    </script>
    <script>
        const dropd = document.getElementsByClassName('dropd');
        const dropdown = document.getElementsByClassName('dropdown');
    
        
        function toggleDropdown() {
            if (dropdown[0].style.display === 'block') {
                dropdown[0].style.display = 'none';
            } else {
                dropdown[0].style.display = 'block';
            }
        }
    
        dropd[0].addEventListener('click', function(event) {
            event.stopPropagation();
            toggleDropdown();
        });
    
        document.addEventListener('click', function(event) {
            if (!dropdown[0].contains(event.target)) {
                dropdown[0].style.display = 'none';
            }
        });
    
        dropdown[0].addEventListener('click', function(event) {
            event.stopPropagation();
        });
    
    
    
    </script>
    <div >                                     &nbsp  &nbsp  &nbsp  &nbsp</div>
      
        <div class="product-main" style="margin-top:15vw">
           
            <div class="product-image-section">
                <img class="product-image" src="product.jpg" alt="Product Image">
                
            </div>

         
            <div class="product-details">
                <h2 id="name">NAME</h2>
                <h3>Brand :<span id="brand"></span></h3>
                <div class="product-description">
                    <h3>Product Details:</h3>
                    <p id="des"></p>
                </div>
                <p class="product-price">49.99</p>
                <button class="btn-buy">Add to Cart</button>
                
            </div>
        </div>

        <!-- Reviews Section -->
        <section class="product-reviews">
            <h2>User Reviews</h2>
            <section id="comment">

            </section>
            <div id="reviews-container"></div>
            <div class="comment-box">
                <textarea id="comment-input" class="comment-input" placeholder="Write your comment here..."></textarea>
                <button id="publish-btn" class="btn-publish">Publish</button>
            </div>
        </section>

        
    
        <footer class="footer">
            <p>&copy; 2025 Your Company. All rights reserved.</p>
            <p>Follow us on: 
                <a href="#">Facebook</a> | 
                <a href="#">Twitter</a> | 
                <a href="#">Instagram</a>
            </p>
        </footer>
    </div>
    <script>
        let userId = localStorage.getItem('usrid');
        const APIKEY =  "67971683f9d2bb616f181e2b"; 
        document.addEventListener("DOMContentLoaded", function () {
            document.getElementsByClassName("product-image")[0].src=localStorage.getItem("product-image")
            document.getElementById("des").textContent=localStorage.getItem("product-description")
            document.getElementById("name").textContent=localStorage.getItem("product-name")
            document.getElementsByClassName("product-price")[0].textContent='$ ' + localStorage.getItem("product-price")
            document.getElementById("brand").textContent= localStorage.getItem("product-brand")

            loadReviews();
        });

        async function loadReviews() {
            const reviewsContainer = document.getElementById("reviews-container");
            reviewsContainer.innerHTML = "";
            const set = {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "x-apikey": APIKEY,
                    "Cache-Control": "no-cache",
                },
            };
            
            const response = await fetch('https://assignmentfed-fb7a.restdb.io/rest/comment',set)
         
           
            const reviews = await response.json();
            reviews.forEach(review => {
                if(review.productID===localStorage.getItem("product-id")){

                
                const div = document.createElement("div");
                div.className = "review-item";
                div.innerHTML = `<p><strong>${review.name || "Anonymous"}:</strong> ${review.comment}</p>`;
                reviewsContainer.appendChild(div);
         } });
        }

        document.getElementById("publish-btn").addEventListener("click", async function () {
            const commentInput = document.getElementById("comment-input");
            const commentText = commentInput.value.trim();
            if (!commentText) return alert("Enter a comment!");

            await fetch('https://assignmentfed-fb7a.restdb.io/rest/comment', {
                method: "POST",
                headers: {
                    "x-apikey": APIKEY,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    'name': localStorage.getItem("usrname") || "Anonymous",
                    'comment': commentText,
                    'productID': localStorage.getItem("product-id"),
                    'usrid': localStorage.getItem("usrid")
                    
                })
            })
            commentInput.value = "";
            loadReviews();
        });
     </script>
</body>
</html>
