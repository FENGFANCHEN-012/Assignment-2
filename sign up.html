<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log in/sign up</title>
    <link rel="stylesheet" href="css.css">
    <link rel="stylesheet" href="style.css">
   
<body>
    <header >
  
        <div class="head" style="position:absolute">
            <a href="http://127.0.0.1:5500/index.html"><img class="logo"src= "Selling_transparent-.png" alt="Find Sell"></a>
            
             <input type="text" class="search" >
             <button class="bt">Search</button>
            <button class="set">Login</button>
            <button class="set" style="margin-left:0">Sign Up</button>
            <div class="set" style="width:7vw;margin-left:1vw" ><button class="inbt"  >Sell</button></div>
        </div>
      </header>
      <div >&nbsp  &nbsp  &nbsp  &nbsp </div>
    <section class="main" style="height:60vw;align-items:start;margin-top:5vw">
        
        <div class="lgif">
            <hr style="margin-top: 3vw;">
           
           <section style="margin-top: 10vw;">
            Welcome!</section> 
           
           <section style="margin-top: 10vw;">
            <div>Sign Up FindSell</div>
            <form>
                <div>
                    <label>Email</label>
                    <input type="text" id="email">
                </div>
                <div style="margin-top: 10px;">
                    <label>Password</label>
                    <input type="password" id="password">
                </div>
            </form>
                <button style="margin-left:5vw" id="submit">Submit</button>
                <section>Do you have account ?<a href='http://127.0.0.1:5500/j.html'>Log in here</a></section>
          
        </div>
    </section>
    <footer class="footer">Hi</footer>
</section>
<script>
    APIKEY="8bf077026b4d45793de980e5a20c7bda48ac1"
    let email = document.getElementById("email").value
    let passwd = document.getElementById("password").value
    let button = document.getElementById("submit")
   button.addEventListener("click",function(){

    var count;
      let setting = {
        method:"GET",
        headers:{
          "Content-Type": "application/json",
            "x-apikey": APIKEY,
            "Cache-Control": "no-cache",
            
        },
      };
      fetch("https://jackm-ff5c.restdb.io/rest/account", setting)
      .then((response)=>response.json())
      .then((response => {
      console.warn("excuse me")
        
        
      
      }
     
      ))
      .catch(error=>{
        console.warn("Error occur pls try again!")
        
      })
      .then( data =>{
         count =  data.length;
         let message =  {
            "email":email,
            "passwd":passwd,
            "id":count +1,
         
            }; let settings = {
                method:"POST",
                headers:{
                  "Content-Type": "application/json",
                    "x-apikey": APIKEY,
                    "Cache-Control": "no-cache",
                    
                },body: JSON.stringify(message),
              };
              fetch("https://jackm-ff5c.restdb.io/rest/account", settings)
              .then((response)=>response.json())
              .then((response => {
              
                console.warn("Sign Up successfully");
                
                transfer();
              }
             
              ))
              .catch(error=>{
                console.warn("Error occur pls try again!")
                
              })
           }
      )
      })

      
     
     
    
    function transfer(){
       
                
                
                console.log('Sign Up successfully');
        
                
                window.location.assign('http://127.0.0.1:5500/j.html');
            
        
    }
      
</script>
</body>
</html>